<!DOCTYPE html>
<html>
<head>
    <title>Palmistry Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0a0a23; color: #f1c40f; text-align: center; font-family: serif; }
        .box { 
            background: white; 
            padding: 20px; 
            width: 256px; /* Match default QR size */
            height: 256px;
            margin: 20px auto; 
            border-radius: 10px; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #results { display: none; margin-top: 50px; padding: 30px; border: 3px double gold; background: #1a1a2e; }
        .line { font-size: 1.5rem; margin: 15px; border-left: 4px solid gold; padding-left: 10px; text-align: left; }
    </style>
</head>
<body>
    <h1>üåü AI SAMUDRIKA SHASTRA üåü</h1>
    
    <div id="qr-screen">
        <h3>Scan to Reveal Your Future</h3>
        <div id="qrcode" class="box"></div>
        <p>Align your hand with the phone's camera</p>
    </div>

    <div id="results">
        <div class="line">‚ù§Ô∏è <b>Heart Line:</b> Strong emotional intelligence.</div>
        <div class="line">üß† <b>Head Line:</b> Logical and analytical mind.</div>
        <div class="line">üå± <b>Life Line:</b> Full of energy and vitality.</div>
        <button onclick="location.reload()" style="padding:10px; margin-top:20px;">RESET SCAN</button>
    </div>

<script>
    // 1. Firebase Configuration
    const firebaseConfig = { databaseURL: "https://palm-scanner-expo-default-rtdb.europe-west1.firebasedatabase.app/" };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // 2. RESET DATABASE ON LOAD (This stops old data from appearing)
    // We set 'scanning' to false immediately when you open the laptop dashboard.
    database.ref('palm_reading_data').set({
        scanning: false,
        timestamp: Date.now()
    });

    document.addEventListener("DOMContentLoaded", function() {
        const scannerUrl = "https://dinzs01.github.io/AI-Palm-Scanner/palm_scanner.html";
        const qrElement = document.getElementById("qrcode");
        if (qrElement) {
            new QRCode(qrElement, { text: scannerUrl, width: 200, height: 200 });
        }
    });

    // 3. SMART LISTENER
    database.ref('palm_reading_data').on('value', (snapshot) => {
        const data = snapshot.val();
        
        // Only switch to results IF scanning is true (sent by the phone)
        if (data && data.scanning === true) {
            document.getElementById('qr-screen').style.display = 'none';
            document.getElementById('results').style.display = 'block';
        } else {
            // Keep the QR code visible if no active scan is happening
            document.getElementById('qr-screen').style.display = 'block';
            document.getElementById('results').style.display = 'none';
        }
    });
</script>
</body>
</html>




